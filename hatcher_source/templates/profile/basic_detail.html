{% extends '../blocks/profile_base.html' %}
{% block css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/complete_profile/basic_detail.css' %}">
{% endblock css %}

{% block content %}
<div class="main-container m-auto container d-flex flex-column align-items-center">
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-bar-fill"></div>
        </div>
        <div class="progress-step active" data-step="Basic Detail">01</div>
        <div class="progress-step" data-step="Education Info">02</div>
        <div class="progress-step" data-step="Experience">03</div>
        <div class="progress-step" data-step="Language">04</div>
        <div class="progress-step" data-step="Resume">05</div>
    </div>
    <div class="" style="width: 63%; overflow: hidden;">
        <form action="" id="complete_profile_form">
        <div class="detail_container" id="basic_detail">
            <h2 class="text-center">Basic Details</h2>
            <div class="mb-3">
                <label for="birth_date" class="form-label compulsory">Birth Date</label>
                <br>
                
                    <input type="text" name="selectedDate" id="txtDate" placeholder="Choose date" />
            
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label compulsory">Bio</label>
                <textarea class="cutom_inp" id="exampleFormControlTextarea1"
                    placeholder="Describe yourself in few words " rows="1"></textarea>
            </div>
            <div class="mb-2">
                <label class="form-label compulsory">Gender</label>
                <br>
                <input type="radio" name="gender" id="male">
                <label class="" for="male">male</label>
                <input type="radio" name="gender" id="female">
                <label class="" for="female">female</label>
            </div>
            <label class="form-label compulsory" for="location">Please share your current address</label>
            <div class="d-flex flex-column ">
                <div >
                    <input class="" type="text" name="location" id="location" style="display: inline;">
                    <button class=" " id="get_loc" style="
                    border: 2px solid;
                    margin-left: 9px;
                    border-radius: 4px;
                    padding: 4px 14px;
                    color: white;
                    background: green;
                    ">Pick Current Location</button>
                </div>
                <div id="city_suggestions" class="autocomplete-items "></div>
            </div>
            <p class="error" id="cmp_frm_err_1"></p>
        </div>
        
        <div class="detail_container" id="Educaiton">
            <h2 class="text-center">Education Details </h2>
            <div class="mb-3" >
                <label class="form-label compulsory" data-educating="">
                    Are you pursuing your education?
                </label>
                <br>
                <span class="info-card rounded" id="student">Yes</span>
                <span class="info-card rounded" id="non_student">No</span>
            </div>
            <div class="mb-3 visually-hidden" id="schooling_detail">
                <label class="form-label compulsory" id="education_depend_label"></label>
                <br>
                <span class="info-card rounded" id="">10th or Below 10th</span>
                <span class="info-card rounded" id="">12th Pass</span>
                <span class="info-card rounded" id="">Diploma</span>
                <span class="info-card rounded" id="">ITI</span>
                <span class="info-card rounded" id="">Graduate</span>
                <span class="info-card rounded" id="">Post Graduate</span>
            </div>
            <div class="mb-3 " id="school_medium">
                <label class="form-label" for="medium">School medium</label>
                <br>
                <select name="school_medium" class="" id="medium" style="width: 150px;  max-height: 100px;">
                    <option value="English">English</option>
                    <option value="Hindi">Hindi</option>
                    <option value="Marathi">Marathi</option>
                    <option value="Bengali">Bengali</option>
                    <option value="Tamil">Tamil</option>
                    <option value="Telugu">Telugu</option>
                    <option value="Gujarati">Gujarati</option>
                    <option value="Kannada">Kannada</option>
                    <option value="Malayalam">Malayalam</option>
                    <option value="Punjabi">Punjabi</option>
                    <option value="Urdu">Urdu</option>
                    <option value="Odia">Odia</option>
                    <option value="Assamese">Assamese</option>
                    <option value="Nepali">Nepali</option>
                    <option value="Sanskrit">Sanskrit</option>
                    <option value="Manipuri">Manipuri</option>
                    <option value="Khasi">Khasi</option>
                    <option value="Bodo">Bodo</option>
                    <option value="Dogri">Dogri</option>
                    <option value="Maithili">Maithili</option>
                    <option value="Santali">Santali</option>
                    <option value="Sindhi">Sindhi</option>
                    <option value="Konkani">Konkani</option>
                </select>
            </div>
            <p class="error" id="cmp_frm_err_2"></p>
        </div>
        <div class="detail_container" id="Experience">
            <h2 class="text-center">Basic Details 3</h2>
            <div class="mb-3">
                <label for="birth_date" class="form-label compulsory">Birth Date</label>
                <input type="text" class="cutom_inp" id="birth_date" placeholder="Choose Date"
                    onfocus="(this.type='date')" onblur="(this.type='text')" type="text">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label compulsory">Bio</label>
                <textarea class="cutom_inp" id="exampleFormControlTextarea1"
                    placeholder="Describe yourself in few words " rows="1"></textarea>
            </div>
            <div class="">
                <label class="form-label compulsory">Gender</label>
                <br>
                <input type="radio" name="gender" id="male">
                <label class="form-label compulsory" for="male">male</label>
                <input type="radio" name="gender" id="female">
                <label class="form-label compulsory" for="female">female</label>
            </div>
            <label class="form-label compulsory" for="location">Please share your current address</label>
            <div class="d-flex flex-column ">
                <div class="input-group ">
                    <input class="form-control" type="text" name="location" id="location" style="display: inline;">
                    <button class="btn " id="get_loc" style="
                            border: 2px solid;
                            margin-left: 9px;
                            border-radius: 4px;
                            color: white;
                            background: green;
                            ">Pick Current Location</button>
                </div>
                <div id="city_suggestions" class="autocomplete-items "></div>
            </div>
            <p class="error" id="cmp_frm_err_3"></p>
        </div>
        <div class="detail_container" id="Language">
            <h2 class="text-center">Basic Details 4</h2>
            <div class="mb-3">
                <label for="birth_date" class="form-label compulsory">Birth Date</label>
                <input type="text" class="cutom_inp" id="birth_date" placeholder="Choose Date"
                    onfocus="(this.type='date')" onblur="(this.type='text')" type="text">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label compulsory">Bio</label>
                <textarea class="cutom_inp" id="exampleFormControlTextarea1"
                    placeholder="Describe yourself in few words " rows="1"></textarea>
            </div>
            <div class="">
                <label class="form-label compulsory">Gender</label>
                <br>
                <input type="radio" name="gender" id="male">
                <label class="form-label compulsory" for="male">male</label>
                <input type="radio" name="gender" id="female">
                <label class="form-label compulsory" for="female">female</label>
            </div>
            <label class="form-label compulsory" for="location">Please share your current address</label>
            <div class="d-flex flex-column ">
                <div class="input-group ">
                    <input class="form-control" type="text" name="location" id="location" style="display: inline;">
                    <button class="btn " id="get_loc" style="
                            border: 2px solid;
                            margin-left: 9px;
                            border-radius: 4px;
                            color: white;
                            background: green;
                            ">Pick Current Location</button>
                </div>
                <div id="city_suggestions" class="autocomplete-items "></div>
            </div>
            <p class="error" id="cmp_frm_err_4"></p>
        </div>
        <div class="detail_container" id="Resume">
            <h2 class="text-center">Basic Details 5</h2>
            <div class="mb-3">
                <label for="birth_date" class="form-label compulsory">Birth Date</label>
                <input type="text" class="cutom_inp" id="birth_date" placeholder="Choose Date"
                    onfocus="(this.type='date')" onblur="(this.type='text')" type="text">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlTextarea1" class="form-label compulsory">Bio</label>
                <textarea class="cutom_inp" id="exampleFormControlTextarea1"
                    placeholder="Describe yourself in few words " rows="1"></textarea>
            </div>
            <div class="">
                <label class="form-label compulsory">Gender</label>
                <br>
                <input type="radio" name="gender" id="male">
                <label class="form-label compulsory" for="male">male</label>
                <input type="radio" name="gender" id="female">
                <label class="form-label compulsory" for="female">female</label>
            </div>
            <label class="form-label compulsory" for="location">Please share your current address</label>
            <div class="d-flex flex-column ">
                <div class="input-group ">
                    <input class="form-control" type="text" name="location" id="location" style="display: inline;">
                    <button class="btn " id="get_loc" style="
                            border: 2px solid;
                            margin-left: 9px;
                            border-radius: 4px;
                            color: white;
                            background: green;
                            ">Pick Current Location</button>
                </div>
                <div id="city_suggestions" class="autocomplete-items "></div>
            </div>
            <p class="error" id="cmp_frm_err_5"></p>
        </div>
        </form>
    </div>  
    <div class="buttons">
        <button id="prev" disabled>Previous</button>
        <button id="next">Next</button>
    </div>
</div>

{% endblock content %}

{% block javascript %}
{% load static %}
<script src="{% static 'js/complete_profile/basic_detail.js' %}"></script>
<script>
    const progressSteps = document.querySelectorAll(".progress-step");
    const progressBarFill = document.querySelector(".progress-bar-fill");
    const prevButton = document.getElementById("prev");
    const nextButton = document.getElementById("next");
    const complete_profile_form = document.getElementById('complete_profile_form');
    const sections = document.querySelectorAll(".detail_container");
    let currentIndex = 0; // Tracks the currently visible section
    let currentStep = 1;

    function next_page() {
    if (currentIndex < sections.length - 1) {
        currentIndex++;
        complete_profile_form.style.marginLeft = `-${currentIndex * 100}%`; // Slide to the next section
    }
    }

    function previous_page() {
    if (currentIndex > 0) {
        currentIndex--;
        complete_profile_form.style.marginLeft = `-${currentIndex * 100}%`; // Slide to the previous section
    }
    }

    function updateProgress() {
      // Update active steps
      progressSteps.forEach((step, index) => {
        if (index < currentStep) {
          step.classList.add("active");
        } else {
          step.classList.remove("active");
        }
      });
    
      // Update progress bar fill
      const progressPercentage = ((currentStep - 1) / (progressSteps.length - 1)) * 100;
      progressBarFill.style.width = `${progressPercentage}%`;

      // Enable/disable buttons
      prevButton.disabled = currentStep === 1;
      nextButton.disabled = currentStep === progressSteps.length;
    }

    
    nextButton.addEventListener("click", () => {
      if (currentStep < progressSteps.length) {
        currentStep++;
        updateProgress();
      }
      next_page()
    });

    prevButton.addEventListener("click", () => {
      if (currentStep > 1) {
        currentStep--;
        updateProgress();
      }
      previous_page()
    });
  </script>
{% endblock javascript %}